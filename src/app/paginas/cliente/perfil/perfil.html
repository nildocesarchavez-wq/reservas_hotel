<div class="app-container">
  <!-- HEADER -->
  <app-header-cliente></app-header-cliente>

  <!-- SIDEBAR -->
  <app-sidebar-cliente></app-sidebar-cliente>

  <!-- MAIN CONTENT -->
  <main class="main-content" *ngIf="currentUser">
    <div class="content-wrapper">
      <!-- PAGE HEADER -->
      <div class="page-header">
        <h1 class="page-title">Mi Perfil</h1>
        <p class="page-subtitle">Administra tu información personal</p>
      </div>

      <!-- LOADING INDICATOR -->
      <div *ngIf="isLoading" class="loading-container">
        <div class="spinner"></div>
        <p>Cargando información...</p>
      </div>

      <!-- CARDS GRID -->
      <div *ngIf="!isLoading" class="cards-grid">
        <!-- CARD: INFORMACIÓN PERSONAL -->
        <div class="card">
          <div class="card-header">
            <h3 class="card-title">Información Personal</h3>
            <button 
              *ngIf="!isEditingProfile" 
              type="button" 
              class="btn btn-edit"
              (click)="enableEditProfile()">
              <i class="fa fa-edit"></i> Editar
            </button>
          </div>
          <div class="card-body">
            <form (submit)="onSubmitProfile($event)">
              <div class="form-row">
                <div class="form-group">
                  <label>Nombre Completo</label>
                  <input 
                    type="text" 
                    class="form-control" 
                    [(ngModel)]="profile.fullName" 
                    name="fullName" 
                    required
                    [disabled]="!isEditingProfile">
                </div>
                <div class="form-group">
                  <label>Email</label>
                  <input 
                    type="email" 
                    class="form-control" 
                    [(ngModel)]="profile.email" 
                    name="email" 
                    required 
                    disabled>
                  <small class="form-text">El email no puede ser modificado</small>
                </div>
              </div>
              <div class="form-row">
                <div class="form-group">
                  <label>Teléfono</label>
                  <input 
                    type="tel" 
                    class="form-control" 
                    [(ngModel)]="profile.phone" 
                    name="phone" 
                    required
                    [disabled]="!isEditingProfile">
                </div>
                <div class="form-group">
                  <label>País</label>
                  <select 
                    class="form-control" 
                    [(ngModel)]="profile.country" 
                    name="country" 
                    required
                    [disabled]="!isEditingProfile">
                    <option value="AR">Argentina</option>
                    <option value="ES">España</option>
                    <option value="MX">México</option>
                    <option value="PE">Perú</option>
                    <option value="CO">Colombia</option>
                  </select>
                </div>
              </div>
              <div class="form-actions" *ngIf="isEditingProfile">
                <button type="submit" class="btn btn-primary">
                  <i class="fa fa-save"></i> Guardar Cambios
                </button>
                <button type="button" class="btn btn-secondary" (click)="cancelEditProfile()">
                  <i class="fa fa-times"></i> Cancelar
                </button>
              </div>
            </form>
          </div>
        </div>

        <!-- CARD: CAMBIAR CONTRASEÑA -->
        <div class="card">
          <div class="card-header">
            <h3 class="card-title">Cambiar Contraseña</h3>
          </div>
          <div class="card-body">
            <form (submit)="onSubmitPassword($event)">
              <div class="form-group">
                <label>Contraseña Actual</label>
                <input type="password" class="form-control" [(ngModel)]="password.current" name="current" required>
              </div>
              <div class="form-group">
                <label>Nueva Contraseña</label>
                <input type="password" class="form-control" [(ngModel)]="password.new" name="new" required>
              </div>
              <div class="form-group">
                <label>Confirmar Nueva Contraseña</label>
                <input type="password" class="form-control" [(ngModel)]="password.confirm" name="confirm" required>
              </div>
              <div class="form-actions">
                <button type="submit" class="btn btn-primary">Actualizar Contraseña</button>
              </div>
            </form>
          </div>
        </div>

        <!-- CARD: ESTADÍSTICAS -->
        <div class="card">
          <div class="card-header">
            <h3 class="card-title">Mis Estadísticas</h3>
          </div>
          <div class="card-body">
            <div class="stats-grid">
              <div class="stat-item">
                <i class="fa fa-calendar"></i>
                <h4>3</h4>
                <p>Reservas Totales</p>
              </div>
              <div class="stat-item">
                <i class="fa fa-check-circle"></i>
                <h4>1</h4>
                <p>Reserva Activa</p>
              </div>
              <div class="stat-item">
                <i class="fa fa-star"></i>
                <h4>15</h4>
                <p>Noches Totales</p>
              </div>
              <div class="stat-item">
                <i class="fa fa-trophy"></i>
                <h4>Gold</h4>
                <p>Nivel de Cliente</p>
              </div>
            </div>
          </div>
        </div>
      </div>

    </div>
  </main>
</div>